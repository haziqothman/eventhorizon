{"ast":null,"code":"// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\nimport { RestError } from \"../restError.js\";\nimport { createHttpHeaders } from \"../httpHeaders.js\";\nexport function createRestError(messageOrResponse, response) {\n  var _a, _b, _c;\n  const resp = typeof messageOrResponse === \"string\" ? response : messageOrResponse;\n  const internalError = (_b = (_a = resp.body) === null || _a === void 0 ? void 0 : _a.error) !== null && _b !== void 0 ? _b : resp.body;\n  const message = typeof messageOrResponse === \"string\" ? messageOrResponse : (_c = internalError === null || internalError === void 0 ? void 0 : internalError.message) !== null && _c !== void 0 ? _c : `Unexpected status code: ${resp.status}`;\n  return new RestError(message, {\n    statusCode: statusCodeToNumber(resp.status),\n    code: internalError === null || internalError === void 0 ? void 0 : internalError.code,\n    request: resp.request,\n    response: toPipelineResponse(resp)\n  });\n}\nfunction toPipelineResponse(response) {\n  var _a;\n  return {\n    headers: createHttpHeaders(response.headers),\n    request: response.request,\n    status: (_a = statusCodeToNumber(response.status)) !== null && _a !== void 0 ? _a : -1\n  };\n}\nfunction statusCodeToNumber(statusCode) {\n  const status = Number.parseInt(statusCode);\n  return Number.isNaN(status) ? undefined : status;\n}","map":{"version":3,"names":["RestError","createHttpHeaders","createRestError","messageOrResponse","response","resp","internalError","_b","_a","body","error","message","_c","status","statusCode","statusCodeToNumber","code","request","toPipelineResponse","headers","Number","parseInt","isNaN","undefined"],"sources":["/Users/user/workspace/eventhorizon/node_modules/@typespec/ts-http-runtime/src/client/restError.ts"],"sourcesContent":["// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport type { PipelineResponse } from \"../interfaces.js\";\nimport { RestError } from \"../restError.js\";\nimport { createHttpHeaders } from \"../httpHeaders.js\";\nimport type { PathUncheckedResponse } from \"./common.js\";\n\n/**\n * Creates a rest error from a PathUnchecked response\n */\nexport function createRestError(response: PathUncheckedResponse): RestError;\n/**\n * Creates a rest error from an error message and a PathUnchecked response\n */\nexport function createRestError(message: string, response: PathUncheckedResponse): RestError;\nexport function createRestError(\n  messageOrResponse: string | PathUncheckedResponse,\n  response?: PathUncheckedResponse,\n): RestError {\n  const resp = typeof messageOrResponse === \"string\" ? response! : messageOrResponse;\n  const internalError = resp.body?.error ?? resp.body;\n  const message =\n    typeof messageOrResponse === \"string\"\n      ? messageOrResponse\n      : (internalError?.message ?? `Unexpected status code: ${resp.status}`);\n  return new RestError(message, {\n    statusCode: statusCodeToNumber(resp.status),\n    code: internalError?.code,\n    request: resp.request,\n    response: toPipelineResponse(resp),\n  });\n}\n\nfunction toPipelineResponse(response: PathUncheckedResponse): PipelineResponse {\n  return {\n    headers: createHttpHeaders(response.headers),\n    request: response.request,\n    status: statusCodeToNumber(response.status) ?? -1,\n  };\n}\n\nfunction statusCodeToNumber(statusCode: string): number | undefined {\n  const status = Number.parseInt(statusCode);\n\n  return Number.isNaN(status) ? undefined : status;\n}\n"],"mappings":"AAAA;AACA;AAGA,SAASA,SAAS,QAAQ,iBAAiB;AAC3C,SAASC,iBAAiB,QAAQ,mBAAmB;AAWrD,OAAM,SAAUC,eAAeA,CAC7BC,iBAAiD,EACjDC,QAAgC;;EAEhC,MAAMC,IAAI,GAAG,OAAOF,iBAAiB,KAAK,QAAQ,GAAGC,QAAS,GAAGD,iBAAiB;EAClF,MAAMG,aAAa,GAAG,CAAAC,EAAA,IAAAC,EAAA,GAAAH,IAAI,CAACI,IAAI,cAAAD,EAAA,uBAAAA,EAAA,CAAEE,KAAK,cAAAH,EAAA,cAAAA,EAAA,GAAIF,IAAI,CAACI,IAAI;EACnD,MAAME,OAAO,GACX,OAAOR,iBAAiB,KAAK,QAAQ,GACjCA,iBAAiB,GAChB,CAAAS,EAAA,GAAAN,aAAa,aAAbA,aAAa,uBAAbA,aAAa,CAAEK,OAAO,cAAAC,EAAA,cAAAA,EAAA,GAAI,2BAA2BP,IAAI,CAACQ,MAAM,EAAG;EAC1E,OAAO,IAAIb,SAAS,CAACW,OAAO,EAAE;IAC5BG,UAAU,EAAEC,kBAAkB,CAACV,IAAI,CAACQ,MAAM,CAAC;IAC3CG,IAAI,EAAEV,aAAa,aAAbA,aAAa,uBAAbA,aAAa,CAAEU,IAAI;IACzBC,OAAO,EAAEZ,IAAI,CAACY,OAAO;IACrBb,QAAQ,EAAEc,kBAAkB,CAACb,IAAI;GAClC,CAAC;AACJ;AAEA,SAASa,kBAAkBA,CAACd,QAA+B;;EACzD,OAAO;IACLe,OAAO,EAAElB,iBAAiB,CAACG,QAAQ,CAACe,OAAO,CAAC;IAC5CF,OAAO,EAAEb,QAAQ,CAACa,OAAO;IACzBJ,MAAM,EAAE,CAAAL,EAAA,GAAAO,kBAAkB,CAACX,QAAQ,CAACS,MAAM,CAAC,cAAAL,EAAA,cAAAA,EAAA,GAAI,CAAC;GACjD;AACH;AAEA,SAASO,kBAAkBA,CAACD,UAAkB;EAC5C,MAAMD,MAAM,GAAGO,MAAM,CAACC,QAAQ,CAACP,UAAU,CAAC;EAE1C,OAAOM,MAAM,CAACE,KAAK,CAACT,MAAM,CAAC,GAAGU,SAAS,GAAGV,MAAM;AAClD","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}